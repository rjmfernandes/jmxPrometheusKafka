lowercaseOutputName: true
lowercaseOutputLabelNames: true
rules:
  # Consumer fetch metrics
  - pattern: "kafka.consumer<type=consumer-fetch-manager-metrics, client-id=(.+), topic=(.+)><>([^:]+)"
    name: kafka_consumer_topic_$3
    labels:
      client_id: $1
      topic: $2
  - pattern: "kafka.consumer<type=consumer-fetch-manager-metrics, client-id=(.+)><>([^:]+)"
    name: kafka_consumer_$2
    labels:
      client_id: $1

  # Producer metrics
  - pattern: "kafka.producer<type=producer-metrics, client-id=(.+)><>([^:]+)"
    name: kafka_producer_$2
    labels:
      client_id: $1
